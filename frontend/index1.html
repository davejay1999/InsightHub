<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User History Navbar</title>
    <style>
        /* Add CSS styles for the navbar and popup window */
        #navbar {
            background-color: #333;
            color: #fff;
            padding: 10px;
        }
        #navbar ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        #navbar li {
            display: inline;
            margin-right: 20px;
            cursor: pointer;
        }
        /* Add more styles for the popup window */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            width: 80%;
            max-width: 600px;
        }
        .popup-content {
            margin-bottom: 20px;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="navbar">
        <ul id="historyList">
            <!-- History items will be dynamically added here -->
        </ul>
    </div>

    <!-- Popup window for displaying summary, transcript, and questions -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <h2>Summary</h2>
            <div id="summary"></div>
        </div>
        <div class="popup-content">
            <h2>Transcript</h2>
            <div id="transcript"></div>
        </div>
        <div class="popup-content">
            <h2>Questions</h2>
            <div id="questions"></div>
        </div>
        <button class="close-btn" onclick="closePopup()">Close</button>
        <button onclick="exportToPDF()">Export to PDF</button>
    </div>

    <script>
        // Fetch user history data from API
        async function fetchUserHistory() {
            // try {
            //     const response = await fetch('your_api_endpoint_here');
            //     const data = await response.json();
            //     return data;
            // } catch (error) {
            //     console.error('Error fetching user history:', error);
            // }

            const data = [
                {
                    summary: 'User history item 1',
                    transcript: 'Transcript for user history item 1',
                    questions: 'Questions for user history item 1'
                },
                {
                    summary: 'User history item 2',
                    transcript: 'Transcript for user history item 2',
                    questions: 'Questions for user history item 2'
                },
                {
                    summary: 'User history item 3',
                    transcript: 'Transcript for user history item 3',
                    questions: 'Questions for user history item 3'
                }
            ];
            return data;
        }

        // Function to populate navbar with user history
        async function populateNavbar() {
            const historyList = document.getElementById('historyList');
            const userHistory = await fetchUserHistory();

            // Clear existing list items
            historyList.innerHTML = '';

            // Loop through user history and create list items
            userHistory.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = item.summary;
                listItem.addEventListener('click', () => showPopup(item));
                historyList.appendChild(listItem);
            });
        }

        // Function to show the popup window with details
        function showPopup(historyItem) {
            const popup = document.getElementById('popup');
            const summary = document.getElementById('summary');
            const transcript = document.getElementById('transcript');
            const questions = document.getElementById('questions');

            // Populate popup with details
            summary.textContent = historyItem.summary;
            transcript.textContent = historyItem.transcript;
            questions.textContent = historyItem.questions;

            // Display the popup
            popup.style.display = 'block';
        }

        // Function to close the popup window
        function closePopup() {
            const popup = document.getElementById('popup');
            popup.style.display = 'none';
        }

        // Function to export content of the popup window to PDF
        function exportToPDF() {
            // Implement PDF export functionality here
            alert('Export to PDF functionality will be implemented here.');
        }

        // Call the function to populate the navbar with user history
        populateNavbar();
    </script>
</body>
</html>
